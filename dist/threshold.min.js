/*
 *  threshold - v0.3.0
 *  manages page width change
 *  https://github.com/idomusha/threshold
 *
 *  Made by idomusha
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(c){this._name=f,this._defaults=b[f].defaults,this.settings=a.extend({},this._defaults,c),this._debug=this.settings.debug,this._debug&&console.log("defaults",this._defaults),this._debug&&console.log("settings",this.settings),this.init()}var f="Threshold";a.extend(e.prototype,{init:function(){var a=this;a.buildCache(),a.bindEvents(),a.callbacks={},a.set()},destroy:function(){var a=this;a.unbindEvents(),a.unset(),a.window.removeData()},buildCache:function(){var c=this;c.window=a(b),c.$html=a("html")},bindEvents:function(){var a=this;a.window.on("resize."+a._name,function(){this._debug&&console.log("----------- resize."+a._name),a.reset()})},unbindEvents:function(){var a=this;a.window.off("."+a._name)},reset:function(){this._debug&&console.log("########### reset()");var a=this;a.unset(!0)},unset:function(b){this._debug&&console.log("########### unset()");var c=this,d=c.$html.attr("class").split(" ").filter(function(a){return 0!==a.lastIndexOf(c.settings["class"],0)});c.$html.attr("class",a.trim(d.join(" "))),b&&c.set()},set:function(){this._debug&&console.log("########### set()");var b=this;a(".width-full").hide(),b.width=a(".width-fixed").eq(0).css("width"),a(".width-full").show();var c=b.settings.widths;for(var d in c)if(c.hasOwnProperty(d)){this._debug&&console.log(d+" = "+c[d]);var e=d,f=c[d];b.width===f&&(b.state=e)}this._debug&&console.log("width:",b.width),this._debug&&console.log("previousState:",b.previousState),this._debug&&console.log("state:",b.state),this._debug&&console.log("callbacks:",b.callbacks),b.$html.addClass(b.settings["class"]+"-"+b.state),b.previousState!==b.state?b.onChange.call(b):b.previousState=b.state},onChange:function(){this._debug&&console.log("########### onChange()");var a=this;this._debug&&console.log("state: "+a.state),a.callbacks[a.state]!==d&&a.call(a.callbacks[a.state]),a.callbacks.all!==d&&a.call(a.callbacks.all),a.previousState=a.state},call:function(b){this._debug&&console.log("########### onChange()"),this._debug&&console.log(b),a.each(b,function(a,b){"function"==typeof b&&b.call()})},after:function(a,b){this._debug&&console.log("########### after()");var c=this;if(a instanceof Array)for(var d=0;d<a.length;d++)c.after(a[d],b);else(c.settings.widths.hasOwnProperty(a)||"all"===a)&&c.store(a,b),this._debug&&console.log("for",a),this._debug&&console.log("callbacks",c.callbacks),(a===c.state||"all"===a)&&(null!=c.interval&&clearInterval(this.interval),c.timer=0,c.interval=setInterval(function(){1==c.timer&&(c.onChange.call(c),clearInterval(c.interval),c.interval=null),c.timer++}.bind(c),100))},store:function(a,b){this._debug&&console.log("########### store()");var c=this;c.callbacks[a]===d&&(c.callbacks[a]=[]),c.callbacks[a].push(b)}}),b[f]=function(c){a.data(b,f)||a.data(b,f,new e(c))},b[f].defaults={"class":"window",widths:{"x-large":"1480px",large:"1360px",medium:"1220px",small:"920px","x-small":"740px",mobile:"100%"},debug:!1}}(jQuery,window,document);