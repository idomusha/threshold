/*
 *  threshold - v0.4.0
 *  manages window width changes
 *  https://github.com/idomusha/threshold
 *
 *  Made by idomusha
 *  Under MIT License
 */
window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(a,b,c,d){"use strict";function e(c){this._name=f,this._defaults=b[f].defaults,this.settings=a.extend({},this._defaults,c),this._debug=this.settings.debug,this._debug&&console.log("defaults",this._defaults),this._debug&&console.log("settings",this.settings),this.init()}var f="threshold";a.extend(e.prototype,{init:function(){var a=this;a.buildCache(),a.bindEvents(),a.callbacks={},a.set()},destroy:function(){var a=this;a.unbindEvents(),a.unset(),a.window.removeData()},buildCache:function(){var c=this;c.window=a(b),c.$html=a("html")},bindEvents:function(){var a=this;a.window.on("resize."+a._name,function(){this._debug&&console.log("----------- resize."+a._name),a.reset()})},unbindEvents:function(){var a=this;a.window.off("."+a._name)},reset:function(){this._debug&&console.log("########### reset()");var a=this;a.unset(!0)},unset:function(b){this._debug&&console.log("########### unset()");var c=this;if(c.settings["class"]){var d=c.$html.attr("class").split(" ").filter(function(a){return 0!==a.lastIndexOf(c.settings.name,0)});c.$html.attr("class",a.trim(d.join(" ")))}else c.$html.removeAttr("data-"+c.settings.name);b&&c.set()},set:function(){this._debug&&console.log("########### set()");var a=this,b=a.settings.ranges;for(var c in b)if(b.hasOwnProperty(c)){this._debug&&console.log(c+" = "+b[c]);var d=c,e=(b[c],"only screen");e+=-1!==b[c][0]?" and (min-width: "+b[c][0]+")":"",e+=-1!==b[c][1]?" and (max-width: "+b[c][1]+")":"",matchMedia(e).matches&&(this._debug&&console.log("match: ",a.state=d),a.state=d)}this._debug&&console.log("previousState:",a.previousState),this._debug&&console.log("state:",a.state),this._debug&&console.log("callbacks:",a.callbacks),a.settings["class"]?a.$html.addClass(a.settings.name+"-"+a.state):a.$html.attr("data-"+a.settings.name,a.state),a.previousState!==a.state?a.onChange.call(a):a.previousState=a.state},onChange:function(){this._debug&&console.log("########### onChange()");var a=this;this._debug&&console.log("state: "+a.state),a.callbacks[a.state]!==d&&a.call(a.callbacks[a.state]),a.callbacks.all!==d&&a.call(a.callbacks.all),a.previousState=a.state},call:function(b){this._debug&&console.log("########### onChange()"),this._debug&&console.log(b),a.each(b,function(a,b){"function"==typeof b&&b.call()})},after:function(a,b){this._debug&&console.log("########### after()");var c=this;if(a instanceof Array)for(var d=0;d<a.length;d++)c.after(a[d],b);else(c.settings.ranges.hasOwnProperty(a)||"all"===a)&&c.store(a,b),this._debug&&console.log("for",a),this._debug&&console.log("callbacks",c.callbacks),(a===c.state||"all"===a)&&(null!=c.interval&&clearInterval(this.interval),c.timer=0,c.interval=setInterval(function(){1==c.timer&&(c.onChange.call(c),clearInterval(c.interval),c.interval=null),c.timer++}.bind(c),100))},store:function(a,b){this._debug&&console.log("########### store()");var c=this;c.callbacks[a]===d&&(c.callbacks[a]=[]),c.callbacks[a].push(b)}}),b[f]=function(c){a.data(b,f)||a.data(b,f,new e(c))},b[f].defaults={ranges:{"x-large":["1600px",-1],large:["1440px","1599px"],medium:["1280px","1439px"],small:["960px","1279px"],"x-small":["760px","959px"],mobile:[-1,"759px"]},name:"window","class":!1,debug:!1}}(jQuery,window,document);